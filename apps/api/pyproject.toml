[build-system]
requires = ["setuptools>=68", "wheel"]
build-backend = "setuptools.build_meta"

[project]
name = "greenwich-smartfaq-api"
version = "0.1.0"
description = "FastAPI backend for Greenwich SmartFAQ"
authors = [{ name = "Dev Team" }]
requires-python = ">=3.11"

# Dependencies với lower + upper bounds rõ ràng
dependencies = [
  # API Framework
  "fastapi>=0.120,<0.121",
  "uvicorn[standard]>=0.30,<0.31",
  
  # Database
  "sqlalchemy>=2.0,<2.1",
  "psycopg[binary]>=3.2,<3.3",
  "alembic>=1.13,<1.14",
  
  # Settings & Auth
  "pydantic-settings>=2.4,<2.5",
  "python-jose[cryptography]>=3.3,<3.4",
  "passlib[bcrypt]>=1.7,<1.8",
  
  # LangChain Core (chỉ giữ những gì thực sự dùng)
  "langchain>=1,<2",
  "langchain-core>=1,<2",
  "langchain-openai>=1,<2",
  "langchain-google-genai>=2.0,<3.0",
  "langchain-chroma>=1,<2",
  "langchain-huggingface>=1.0.0,<2.0",
  
  # Embeddings & ML
  "sentence-transformers>=3.0,<4.0",
  "torch>=2.0,<3.0",
  
  # Document Processing
  "pypdf>=4.0,<5.0",
  "docx2txt>=0.8,<0.9",
  
  # Background Tasks
  "celery>=5.4,<5.5",
  "redis>=5.0,<5.1",
  "python-multipart>=0.0.9,<0.1",
]

[project.optional-dependencies]
dev = [
  "pytest>=8.3,<9.0",
  "pytest-asyncio>=0.24,<0.25",
  "pytest-cov>=5.0,<6.0",
  "httpx>=0.27,<0.28",
  "ruff>=0.5,<0.6",
  "black>=24.8,<25.0",
]

[tool.setuptools]
packages = ["app"]

[tool.ruff]
target-version = "py311"
line-length = 100

[tool.black]
target-version = ["py311"]
line-length = 100
