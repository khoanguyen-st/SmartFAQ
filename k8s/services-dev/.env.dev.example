# ===================================
# SmartFAQ API - Development Environment Variables
# ===================================
# Copy this file to .env.dev and fill in the values

# ===================================
# Database Configuration
# ===================================
# PostgreSQL connection string for Kubernetes
# Service name: postgres-smartfaq-postgresql.smartfaq-dev.svc.cluster.local
DATABASE_URL=postgresql+psycopg://postgres:smartfaq_dev_postgres_pass_2024@postgres-smartfaq-postgresql.smartfaq-dev.svc.cluster.local:5432/smartfaq_dev

# ===================================
# Redis/Celery Configuration
# ===================================
# Redis connection for Celery (background tasks)
# Service name: redis-smartfaq-master.smartfaq-dev.svc.cluster.local
CELERY_BROKER_URL=redis://:smartfaq_dev_redis_pass_2024@redis-smartfaq-master.smartfaq-dev.svc.cluster.local:6379/0
CELERY_RESULT_BACKEND=redis://:smartfaq_dev_redis_pass_2024@redis-smartfaq-master.smartfaq-dev.svc.cluster.local:6379/0

# ===================================
# MongoDB Configuration
# ===================================
# MongoDB connection for chat persistence
# Service name: mongo-smartfaq-mongodb.smartfaq-dev.svc.cluster.local
MONGO_URL=mongodb://smartfaq:smartfaq_dev_mongo_pass_2024@mongo-smartfaq-mongodb.smartfaq-dev.svc.cluster.local:27017/smartfaq_dev?authSource=admin
MONGO_DB=smartfaq_dev
MONGO_USERNAME=smartfaq
MONGO_PASSWORD=smartfaq_dev_mongo_pass_2024
MONGO_CHAT_COLLECTION=chat_messages
MONGO_SESSION_COLLECTION=chat_sessions

# ===================================
# Vector Store (Chroma) Configuration
# ===================================
CHROMA_URL=http://chroma.smartfaq-dev.svc.cluster.local:8000
CHROMA_COLLECTION=kb_main
CHROMA_METRIC=cosine

# ===================================
# Cloud Storage (MinIO)
# ===================================
MINIO_ROOT_USER=smartfaq
MINIO_ROOT_PASSWORD=smartfaq_dev_minio_pass_2024
MINIO_ENDPOINT=http://minio.smartfaq-dev.svc.cluster.local:9000
MINIO_BUCKET=smartfaq-data

# ===================================
# API Server Settings
# ===================================
API_HOST=0.0.0.0
API_PORT=8000

# ===================================
# Security & Authentication
# ===================================
# IMPORTANT: Generate a strong random secret for production!
# Use: openssl rand -hex 32
JWT_SECRET=CHANGE_ME_GENERATE_RANDOM_SECRET
JWT_EXPIRE_MINUTES=1440

# Default Admin User (for initial migration)
# IMPORTANT: Change these credentials in production!
ADMIN_DEFAULT_USERNAME=admin
ADMIN_DEFAULT_EMAIL=admin@smartfaq.dev
ADMIN_DEFAULT_PASSWORD=CHANGE_ME_STRONG_PASSWORD

# ===================================
# Google Gemini LLM Configuration
# ===================================
# Get your API key from: https://aistudio.google.com/app/apikey
# IMPORTANT: Keep this secret! Never commit to git!
GOOGLE_API_KEY=YOUR_GOOGLE_API_KEY_HERE

# Model selection (see: https://ai.google.dev/gemini-api/docs/models)
# Options: gemini-2.0-flash-exp, gemini-1.5-flash, gemini-1.5-pro
LLM_MODEL=gemini-2.0-flash-exp
LLM_TEMPERATURE=0.3
LLM_MAX_TOKENS=2048

# ===================================
# Embeddings Configuration (HuggingFace)
# ===================================
# Using multilingual-e5-base for local embeddings
# Model card: https://huggingface.co/intfloat/multilingual-e5-base
EMBED_MODEL=intfloat/multilingual-e5-base
EMBED_DEVICE=cpu
EMBED_NORMALIZE=true
EMBED_BATCH=32

# ===================================
# RAG System Settings
# ===================================
CONFIDENCE_THRESHOLD=0.65
MAX_CONTEXT_CHARS=8000
TOP_K_RETRIEVAL=5

# ===================================
# Hybrid Search (Vector + BM25 Lexical)
# ===================================
HYBRID_ENABLED=true
HYBRID_K_VEC=20
HYBRID_K_LEX=20
HYBRID_FUSION_K=60
HYBRID_MAX_DOCS=5000

# ===================================
# Document Upload Settings
# ===================================
# In Kubernetes, this should be /app/uploads (mounted from PVC)
UPLOAD_DIR=/app/uploads
UPLOAD_MAX_MB=50

# ===================================
# Email Configuration
# ===================================
MAIL_PASSWORD=your_app_password_here
MAIL_USERNAME=your_email@gmail.com
MAIL_FROM=your_email@gmail.com
MAIL_FROM_NAME=SmartFAQ System
MAIL_PORT=587
MAIL_SERVER=smtp.gmail.com
MAIL_STARTTLS=True
MAIL_SSL_TLS=False
MAIL_USE_CREDENTIALS=True
FRONTEND_RESET_PASSWORD_URL=https://smartfaq.dev.devplus.edu.vn/create-new-password

# ===================================
# Optional: Logging Configuration
# ===================================
# LOG_LEVEL=INFO
# LOG_FORMAT=json

# ===================================
# Optional: CORS Configuration
# ===================================
# CORS_ORIGINS=["https://smartfaq.dev.devplus.edu.vn"]
# CORS_ALLOW_CREDENTIALS=true
